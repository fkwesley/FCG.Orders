
#----------->> USERS

# Variáveis
RESOURCE_GROUP="RG_FCG"
CLUSTER_NAME="aks-fcg-users"
LOCATION="canadacentral"
NODE_VM_SIZE="Standard_B2s_v2"
NODE_COUNT=1
NODE_MIN_COUNT=1
NODE_MAX_COUNT=10
K8S_VERSION="1.32.9"
DNS_PREFIX="aks-fcg-users-dns"
NODE_OS_DISK_SIZE=128
NODE_OS_SKU="Ubuntu"
ACR_NAME="acrfcg"

# Criação do AKS
az aks create \
  --resource-group $RESOURCE_GROUP \
  --name $CLUSTER_NAME \
  --location $LOCATION \
  --kubernetes-version $K8S_VERSION \
  --node-resource-group "MC_${RESOURCE_GROUP}_${CLUSTER_NAME}" \
  --node-vm-size $NODE_VM_SIZE \
  --node-count $NODE_COUNT \
  --enable-cluster-autoscaler \
  --min-count $NODE_MIN_COUNT \
  --max-count $NODE_MAX_COUNT \
  --enable-managed-identity \
  --network-plugin azure \
  --load-balancer-sku standard \
  --dns-name-prefix $DNS_PREFIX \
  --node-osdisk-size $NODE_OS_DISK_SIZE \
  --enable-addons monitoring \
  --attach-acr $ACR_NAME \
  --generate-ssh-keys

#----------->> GAMES

# Variáveis
RESOURCE_GROUP="RG_FCG"
CLUSTER_NAME="aks-fcg-games"
LOCATION="eastus"
NODE_VM_SIZE="Standard_DC2as_v5"
NODE_COUNT=1
NODE_MIN_COUNT=1
NODE_MAX_COUNT=5
K8S_VERSION="1.33.5"
DNS_PREFIX="aks-fcg-games-dns"
NODE_OS_DISK_SIZE=128
NODE_OS_SKU="Ubuntu"
ACR_NAME="acrfcg"

# Criação do AKS
az aks create \
  --resource-group $RESOURCE_GROUP \
  --name $CLUSTER_NAME \
  --location $LOCATION \
  --kubernetes-version $K8S_VERSION \
  --node-resource-group "MC_${RESOURCE_GROUP}_${CLUSTER_NAME}" \
  --node-vm-size $NODE_VM_SIZE \
  --node-count $NODE_COUNT \
  --enable-cluster-autoscaler \
  --min-count $NODE_MIN_COUNT \
  --max-count $NODE_MAX_COUNT \
  --enable-managed-identity \
  --network-plugin azure \
  --load-balancer-sku standard \
  --dns-name-prefix $DNS_PREFIX \
  --node-osdisk-size $NODE_OS_DISK_SIZE \
  --enable-addons monitoring \
  --enable-oidc-issuer \
  --enable-workload-identity \
  --attach-acr $ACR_NAME \
  --generate-ssh-keys

#----------->> ORDERS

# Variáveis
RESOURCE_GROUP="RG_FCG"
CLUSTER_NAME="aks-fcg-orders"
LOCATION="northcentralus"
NODE_VM_SIZE="Standard_D2_v3"
NODE_COUNT=1
NODE_MIN_COUNT=1
NODE_MAX_COUNT=5
K8S_VERSION="1.33.5"
DNS_PREFIX="aks-fcg-orders-dns"
NODE_OS_DISK_SIZE=128
NODE_OS_SKU="Ubuntu"
ACR_NAME="acrfcg"

# Criação do AKS
az aks create \
  --resource-group $RESOURCE_GROUP \
  --name $CLUSTER_NAME \
  --location $LOCATION \
  --kubernetes-version $K8S_VERSION \
  --node-resource-group "MC_${RESOURCE_GROUP}_${CLUSTER_NAME}" \
  --node-vm-size $NODE_VM_SIZE \
  --node-count $NODE_COUNT \
  --enable-cluster-autoscaler \
  --min-count $NODE_MIN_COUNT \
  --max-count $NODE_MAX_COUNT \
  --enable-managed-identity \
  --network-plugin azure \
  --load-balancer-sku standard \
  --dns-name-prefix $DNS_PREFIX \
  --node-osdisk-size $NODE_OS_DISK_SIZE \
  --enable-addons monitoring \
  --enable-oidc-issuer \
  --enable-workload-identity \
  --attach-acr $ACR_NAME \
  --generate-ssh-keys


#----------->> PAYMENTS

# Variáveis
RESOURCE_GROUP="RG_FCG"
CLUSTER_NAME="aks-fcg-payments"
LOCATION="chilecentral"
NODE_VM_SIZE="Standard_B2s_v2"
NODE_COUNT=1
NODE_MIN_COUNT=1
NODE_MAX_COUNT=5
K8S_VERSION="1.33.5"
DNS_PREFIX="aks-fcg-payments-dns"
NODE_OS_DISK_SIZE=128
NODE_OS_SKU="Ubuntu"
ACR_NAME="acrfcg"

# Criação do AKS
az aks create \
  --resource-group $RESOURCE_GROUP \
  --name $CLUSTER_NAME \
  --location $LOCATION \
  --kubernetes-version $K8S_VERSION \
  --node-resource-group "MC_${RESOURCE_GROUP}_${CLUSTER_NAME}" \
  --node-vm-size $NODE_VM_SIZE \
  --node-count $NODE_COUNT \
  --enable-cluster-autoscaler \
  --min-count $NODE_MIN_COUNT \
  --max-count $NODE_MAX_COUNT \
  --enable-managed-identity \
  --network-plugin azure \
  --load-balancer-sku standard \
  --dns-name-prefix $DNS_PREFIX \
  --node-osdisk-size $NODE_OS_DISK_SIZE \
  --enable-addons monitoring \
  --enable-oidc-issuer \
  --enable-workload-identity \
  --attach-acr $ACR_NAME \
  --generate-ssh-keys

#----------->> NOTIFICATION

# Variáveis
RESOURCE_GROUP="RG_FCG"
CLUSTER_NAME="aks-fcg-notifications"
LOCATION="mexicocentral"
NODE_VM_SIZE="Standard_B2s_v2"
NODE_COUNT=1
NODE_MIN_COUNT=1
NODE_MAX_COUNT=5
K8S_VERSION="1.33.5"
DNS_PREFIX="aks-fcg-notifications-dns"
NODE_OS_DISK_SIZE=128
NODE_OS_SKU="Ubuntu"
ACR_NAME="acrfcg"

# Criação do AKS
az aks create \
  --resource-group $RESOURCE_GROUP \
  --name $CLUSTER_NAME \
  --location $LOCATION \
  --kubernetes-version $K8S_VERSION \
  --node-resource-group "MC_${RESOURCE_GROUP}_${CLUSTER_NAME}" \
  --node-vm-size $NODE_VM_SIZE \
  --node-count $NODE_COUNT \
  --enable-cluster-autoscaler \
  --min-count $NODE_MIN_COUNT \
  --max-count $NODE_MAX_COUNT \
  --enable-managed-identity \
  --network-plugin azure \
  --load-balancer-sku standard \
  --dns-name-prefix $DNS_PREFIX \
  --node-osdisk-size $NODE_OS_DISK_SIZE \
  --enable-addons monitoring \
  --enable-oidc-issuer \
  --enable-workload-identity \
  --attach-acr $ACR_NAME \
  --generate-ssh-keys